---
title: 前端开发中的跨域访问问题
author: Axellance
date: 2025-04-02
layout: post
category: 软件开发
tags: [软件开发]
mermaid: true
---

最近在工作中做到了一些前端开发工作，由于工作环境受限，只能使用原生的js，在开发过程中遇到了跨域请求问题，特此记录。

## 一、为什么会出现跨域问题

本质上是浏览器有同源策略限制。同源策略（Same Origin Policy） 是一种约定，是浏览器最核心的安全功能，如果缺少了同源策略，浏览器的正常功能可能会受到影响。可以说，web是构建在同源策略基础之上的，浏览器只是针对同源策略的一种实现。

同源策略会阻止一个域的js脚本和另一个域的内容进行交互，所谓同源就是同一个域，即两个页面具有相同的协议、主机和端口号。

## 二、什么是跨域

当一个请求url的**协议、域名和端口号**三者之间任意一个与当前页面url不同，即为跨域。

| 当前页面url                 | 请求url                            | 是否跨域 | 原因                   |
| --------------------------- | ---------------------------------- | -------- | ---------------------- |
| http://www.current.com      | http://www.request.com/index.html  | 否       | 协议、域名、端口号相同 |
| http://www.current.com      | https://www.request.com/index.html | 是       | 协议不同（http/https） |
| http://www.current.com      | http://www.baidu.com               | 是       | 域名不同               |
| http://www.current.com      | http://current.com                 | 是       | 主域名不同             |
| http://www.current.com:8080 | http://www.current.com:8081        | 是       | 端口号不同             |

我遇到的问题是无法使用js向后端发起http请求：

```javascript
 const response = await fetch(API_URL, {
     method: 'POST',
     headers: {
         'Content-Type': 'application/json'
     },
     body: JSON.stringify({
         "model": "modelscope.cn/Qwen/Qwen2.5-3B-Instruct-GGUF:latest",
         "messages": [
             {"role": "user", "content": message}
         ],
         "stream": false
     })
 });
```

如代码所示，我需要调用云上部署的阿里通义千问大模型的api，在开发前端界面过程中出现了阻止跨域访问的问题，跨域原因是域名不同（本机与云服务器不域名不同）。

## 三、解决办法







## 四、我的解决方案

